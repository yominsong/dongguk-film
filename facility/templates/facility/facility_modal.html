<div id="id_modal"
     x-data="{ open: false }"
     @keydown.window.escape="if (canCloseModal()) { open = false; executeWhenModalIsClosed(); }"
     x-show="open"
     class="relative z-50"
     aria-labelledby="id_modal_title"
     x-ref="dialog"
     aria-modal="true"
     hidden>
    <div x-show="open"
         x-transition:enter="ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
    <div class="fixed inset-0 z-10 overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
            <div x-show="open"
                 x-transition:enter="ease-out duration-300"
                 x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                 x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
                 x-transition:leave="ease-in duration-200"
                 x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
                 x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                 class="w-full relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:max-w-lg sm:p-6"
                 @click.away="open = true">
                <div class="absolute right-0 top-0 pr-4 pt-5 sm:pr-5 block">
                    <button id="id_close_modal"
                            type="button"
                            class="rounded-md bg-white text-gray-400 hover:text-gray-500 focus:df-focus-ring-offset-white disabled:cursor-not-allowed"
                            @click="if (canCloseModal()) { open = false; executeWhenModalIsClosed(); }"
                            @keydown.enter.prevent="if (canCloseModal()) { open = false; executeWhenModalIsClosed(); }"
                            @keyup.space.prevent="if (canCloseModal()) { open = false; executeWhenModalIsClosed(); }"
                            tabindex="0">
                        <span class="sr-only"><span class="class-heading">예약내역 상세 보기</span> 화면 닫기</span>
                        <svg class="h-6 w-6"
                             fill="none"
                             viewBox="0 0 24 24"
                             stroke-width="1.5"
                             stroke="currentColor"
                             aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="flex flex-col">
                    <div class="flex mb-5">
                        <div class="mt-0 text-left">
                            <h3 id="id_modal_title"
                                class="text-base font-semibold leading-6 text-gray-900">
                                <span class="class-heading">예약내역 상세 보기</span>
                            </h3>
                        </div>
                    </div>
                    <div class="flex flex-1 flex-col justify-between">
                        <div class="space-y-5">
                            <div class="class-link-list-item text-sm flex relative justify-between gap-x-4 py-5 hover:bg-gray-50 px-4 sm:px-6 -mx-4 sm:-mx-6">
                                <a id="id_public_url_from_request"
                                   href="#"
                                   target="_blank"
                                   class="absolute inset-x-0 -top-px bottom-0 cursor-pointer focus:df-focus-ring-inset"
                                   tabindex="0"></a>
                                <div class="flex min-w-0 items-center">
                                    <div class="min-w-0 flex-auto">
                                        <p class="font-semibold leading-6 text-gray-900">
                                            <span id="id_name_from_request">시설</span>
                                        </p>
                                        <p id="id_status_descr"
                                           class="class-collection-id-and-quantity mt-1 truncate leading-5 text-gray-500 ">
                                            운영진이 예약 정보를 검토하고 있어요.
                                        </p>
                                    </div>
                                </div>
                                <div class="flex shrink-0 items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                         fill="none"
                                         viewBox="0 0 24 24"
                                         stroke-width="1.5"
                                         stroke="currentColor"
                                         class="w-6 h-6 text-gray-500">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
                                    </svg>
                                </div>
                            </div>
                            <div class="rounded-md bg-gray-50 p-4 text-sm text-gray-700 divide-y divide-gray-100">
                                <div class="flex flex-col space-y-2 pb-4">
                                    <div class="flex justify-between items-center">
                                        <div class="flex">상태</div>
                                        <div id="id_status_from_request"
                                             class="animate-pulse pulse-on mt-0.5 h-4 w-14 bg-gray-200 rounded"></div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <div class="flex">└ 신청일시</div>
                                        <div id="id_created_time_from_request"
                                             class="animate-pulse pulse-on mt-0.5 h-4 w-36 bg-gray-200 rounded"></div>
                                    </div>
                                    <div class="hidden justify-between items-center">
                                        <div class="flex">└ 확정일시</div>
                                        <div id="id_approved_time_from_request"
                                             class="animate-pulse pulse-on mt-0.5 h-4 w-36 bg-gray-200 rounded"></div>
                                    </div>
                                    <div class="hidden justify-between items-center">
                                        <div class="flex">└ 시작일시</div>
                                        <div id="id_started_time_from_request"
                                             class="animate-pulse pulse-on mt-0.5 h-4 w-36 bg-gray-200 rounded"></div>
                                    </div>
                                    <div class="hidden justify-between items-center">
                                        <div class="flex">└ 종료일시</div>
                                        <div id="id_completed_time_from_request"
                                             class="animate-pulse pulse-on mt-0.5 h-4 w-36 bg-gray-200 rounded"></div>
                                    </div>
                                    <div class="hidden justify-between items-center">
                                        <div class="flex">└ 취소일시</div>
                                        <div id="id_canceled_time_from_request"
                                             class="animate-pulse pulse-on mt-0.5 h-4 w-36 bg-gray-200 rounded"></div>
                                    </div>
                                    <div class="hidden justify-between items-center">
                                        <div class="flex">└ 반려일시</div>
                                        <div id="id_rejected_time_from_request"
                                             class="animate-pulse pulse-on mt-0.5 h-4 w-36 bg-gray-200 rounded"></div>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center py-4">
                                    <div class="flex">사용 목적</div>
                                    <div id="id_purpose_from_request"
                                         class="animate-pulse pulse-on mt-0.5 h-4 w-20 bg-gray-200 rounded"></div>
                                </div>
                                <div class="flex flex-col space-y-2 pt-4">
                                    <div class="flex justify-between items-center">
                                        <div class="flex">사용 기간</div>
                                        <div id="id_duration_from_request"
                                             class="animate-pulse pulse-on mt-0.5 h-4 w-6 bg-gray-200 rounded"></div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <div class="flex">└ 예정 시작일시</div>
                                        <div id="id_start_datetime_from_request"
                                             class="animate-pulse pulse-on mt-0.5 h-4 w-36 bg-gray-200 rounded"></div>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <div class="flex">└ 예정 종료일시</div>
                                        <div id="id_end_datetime_from_request"
                                             class="animate-pulse pulse-on mt-0.5 h-4 w-36 bg-gray-200 rounded"></div>
                                    </div>
                                </div>
                            </div>
                            <input type="hidden" id="id_status" value="">
                            <input type="hidden" id="id_record_id" value="">
                            <input type="hidden" id="id_category" value="">
                            <input type="hidden" id="id_project_id" value="">
                        </div>
                    </div>
                </div>
                {% if "EQUIPMENT" in permission_type_list or "WORKSPACE" in permission_type_list %}
                    <div id="id_review_button_container"
                         class="flex flex-col-reverse mt-5 justify-between sm:items-center sm:flex-row"
                         data-permission-type-list="{{ permission_type_list }}">
                        <div class="flex mt-2 text-sm sm:mt-0">
                            <p class="text-gray-500 sm:mt-0" id="id_approve_descr" hidden>잠시만 기다려주세요.</p>
                            <p class="text-gray-500 sm:mt-0" id="id_reject_descr" hidden></p>
                            <p class="text-gray-500 sm:mt-0" id="id_in_progress_descr" hidden></p>
                            <p class="text-gray-500 sm:mt-0" id="id_complete_descr" hidden></p>
                            <p class="text-flamingo-600 sm:mt-0" id="id_approve_error" hidden></p>
                            <p class="text-flamingo-600 sm:mt-0" id="id_reject_error" hidden></p>
                            <p class="text-flamingo-600 sm:mt-0" id="id_in_progress_error" hidden></p>
                            <p class="text-flamingo-600 sm:mt-0" id="id_complete_error" hidden></p>
                        </div>
                        <div class="sm:flex sm:flex-row-reverse">
                            <button type="button"
                                    id="id_approve"
                                    class="inline-flex w-full justify-center rounded-md bg-flamingo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-flamingo-700 sm:ml-3 sm:w-auto disabled:opacity-75 focus:df-focus-ring-offset-white disabled:hover:bg-flamingo-600 disabled:cursor-not-allowed"
                                    tabindex="0">
                                <svg class="animate-spin mr-2 h-5 w-5 text-white hidden"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                        id="id_approve_spin">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                    </path>
                                </svg>
                                확정하기
                            </button>
                            <button type="button"
                                    id="id_reject"
                                    class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 hover:text-red-700 hover:bg-red-50 sm:mt-0 sm:w-auto disabled:opacity-75 focus:text-red-700 focus:bg-red-50 focus:df-focus-ring-offset-white disabled:text-gray-900 disabled:bg-white disabled:hover:bg-white disabled:cursor-not-allowed"
                                    tabindex="0">
                                <svg class="animate-spin mr-2 h-5 w-5 hidden"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                        id="id_reject_spin">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                    </path>
                                </svg>
                                <span class="class-double-check" hidden>정말&nbsp;</span>반려하기
                            </button>
                            <button type="button"
                                    id="id_in_progress"
                                    class="hidden w-full justify-center rounded-md bg-flamingo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-flamingo-700 sm:ml-3 sm:w-auto disabled:opacity-75 focus:df-focus-ring-offset-white disabled:hover:bg-flamingo-600 disabled:cursor-not-allowed"
                                    tabindex="0">
                                <svg class="animate-spin mr-2 h-5 w-5 text-white hidden"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                        id="id_in_progress_spin">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                    </path>
                                </svg>
                                사용 시작 처리하기
                            </button>
                            <button type="button"
                                    id="id_complete"
                                    class="hidden w-full justify-center rounded-md bg-flamingo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-flamingo-700 sm:ml-3 sm:w-auto disabled:opacity-75 focus:df-focus-ring-offset-white disabled:hover:bg-flamingo-600 disabled:cursor-not-allowed"
                                    tabindex="0">
                                <svg class="animate-spin mr-2 h-5 w-5 text-white hidden"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                        id="id_complete_spin">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                    </path>
                                </svg>
                                사용 종료 처리하기
                            </button>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
